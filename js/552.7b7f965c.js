"use strict";(self["webpackChunkvue_admin_demo"]=self["webpackChunkvue_admin_demo"]||[]).push([[552],{4552:function(t,e,n){n.r(e),n.d(e,{default:function(){return L}});var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("el-tabs",{staticClass:"tab-container",attrs:{type:"border-card"}},[n("el-tab-pane",{attrs:{label:"Client"}},[t.res1?n("TimeLine",{attrs:{timelineData:t.res1}}):t._e()],1),n("el-tab-pane",{attrs:{label:"Server"}},[t.res2?n("TimeLine",{attrs:{timelineData:t.res2}}):t._e()],1)],1)],1)},a=[],i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"block"},[n("el-timeline",{attrs:{reverse:!0}},t._l(t.timeLineList,(function(e,s){return n("el-timeline-item",{key:e.id,attrs:{timestamp:e.dateTime,placement:"top"}},[n("el-card",{staticClass:"timeline-card"},[n("h4",[t._v(t._s(e.UpdateSummary))]),n("div",{staticClass:"tag-list"},t._l(e.tagList,(function(e,s){return n("el-tag",{key:s,staticStyle:{"margin-right":"20px"},attrs:{type:t._f("statusFilter")(e.type)}},[t._v(" "+t._s(e.content)+" ")])})),1),n("p",[t._v(t._s(e.UpdateContent))])])],1)})),1)],1)},r=[],l={name:"TimeLine",data(){return{timeLineList:[],total:null}},filters:{statusFilter(t){const e=["danger","info","success","warning"];return e[t]}},mounted(){this.$nextTick((()=>{this.resolveData()}))},props:{timelineData:{type:Object,require:!0}},methods:{resolveData(){const{data:t,totalCount:e}=this.timelineData;this.timeLineList=t,this.total=e}}},o=l,u=n(1656),c=(0,u.A)(o,i,r,!1,null,null,null),m=c.exports,d=n(3518),h=n(257),p=n(7180),f={name:"UpdataLog",computed:{...(0,d.L8)(["name"])},components:{TimeLine:m},data(){return{res1:null,res2:null}},mounted(){this.fetchData(),this.setupEventListener()},beforeDestroy(){console.log("组件即将销毁，删除事件监听"),this.removeEventListener()},methods:{async fetchData(){try{const[t,e]=await Promise.all([(0,h.i)(),(0,h.b)()]);this.$message({message:`请求timeline数据成功${t.length},${e.length}`,type:"success"}),this.res1=t,this.res2=e}catch(t){this.$message({message:`请求数据出现错误${t}`,type:"error"})}},setupEventListener(){p.A.$on("tokenRefreshed",this.fetchData.bind(this))},removeEventListener(){p.A.$off("tokenRefreshed")}}},v=f,g=(0,u.A)(v,s,a,!1,null,"3045aa7e",null),L=g.exports},257:function(t,e,n){n.d(e,{b:function(){return i},i:function(){return a}});var s=n(9412);function a(t){return(0,s.A)({url:"/timeline/v1/getList",method:"get",data:t})}function i(t){return(0,s.A)({url:"/timeline/v2/getList",method:"get",data:t})}}}]);
//# sourceMappingURL=552.7b7f965c.js.map